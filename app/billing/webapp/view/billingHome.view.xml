<mvc:View
    controllerName="billing.controller.billingHome"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core">

    <Page id="page" title="Billing Allocation">

        <content>

            <Wizard id="BillingWizard" showNextButton="false">
                
                <WizardStep
                    id="DealerStep"
                    title="Dealer Information"
                    validated="false">

                    <VBox class="sapUiResponsiveMargin">

                        <HBox class="sapUiSmallMargin" alignItems="End" justifyContent="SpaceBetween">

                            <VBox width="15%">
                                <Label text="Select Dealer ID :" class="sapUiSmallMarginBottom"/>
                                <Select 
                                    id="dealerSelect"
                                    width="100%"
                                    items="{/Dealers}"
                                    change="onDealerSelect">
                                    <core:Item key="{dealerID}"
                                               text="{dealerID} - {dealerName}"/>
                                </Select>
                            </VBox>

                            <VBox width="15%">
                                <Label text="Dealer Name :" class="sapUiSmallMarginBottom"/>
                                <Input 
                                    value="{/selectedDealer/dealerName}" 
                                    editable="false"
                                    width="100%"/>
                            </VBox>

                            <VBox width="15%">
                                <Label text="Fund Availability :" class="sapUiSmallMarginBottom"/>
                                <Input 
                                    value="{
                                        path: '/selectedDealer/fundAvailability',
                                        type: 'sap.ui.model.type.Currency'
                                    }" 
                                    editable="false"
                                    width="100%"
                                    textAlign="Right"/>
                            </VBox>

                            <VBox width="15%">
                                <Label text="Limit Available (in INF) :" class="sapUiSmallMarginBottom"/>
                                <Input 
                                    value="{
                                        path: '/selectedDealer/limitAvailability',
                                        type: 'sap.ui.model.type.Currency'
                                    }" 
                                    editable="false"
                                    width="100%"
                                    textAlign="Right"/>
                            </VBox>

                            <VBox width="15%">
                                <Label text="INF Other ( X ) Account" class="sapUiSmallMarginBottom"/>
                                <Input 
                                    value="{
                                        path: '/selectedDealer/infOtherAmount',
                                        type: 'sap.ui.model.type.Currency'
                                    }" 
                                    editable="false"
                                    width="100%"
                                    textAlign="Right"/>
                            </VBox>
                            <VBox class="sapUiSmallMarginTop">
                            <Button 
                                text="Go" 
                                type="Emphasized"
                                press="onDealerGo"                    
                                width="150px"
                                />
                        </VBox>

                        </HBox>

                    </VBox>

                </WizardStep>

                <WizardStep
                    id="ModelStep"
                    title="Model Allocation"
                    validated="false">

                    <VBox class="sapUiResponsiveMargin">
                        
                        <HBox class="sapUiSmallMarginBottom">
                            <Title text="Model Allocation Details" level="H3"/>
                        </HBox>

                        <Table 
                            id="allocationTable"
                            items="{/Models}"
                            class="sapUiResponsiveMargin">

                            <columns>
                                <Column width="15%" demandPopin="true" minScreenWidth="Tablet">
                                    <Text text="Model Code"/>
                                </Column>
                                <Column width="25%" demandPopin="true" minScreenWidth="Tablet">
                                    <Text text="Model Description"/>
                                </Column>
                                <Column width="12%" demandPopin="true" minScreenWidth="Tablet" hAlign="Right">
                                    <Text text="Available Stock"/>
                                </Column>
                                <Column width="12%" demandPopin="true" minScreenWidth="Tablet" hAlign="Right">
                                    <Text text="Order Qty"/>
                                </Column>
                                <Column width="15%" demandPopin="true" minScreenWidth="Tablet" hAlign="Right">
                                    <Text text="Allocation Qty"/>
                                </Column>
                                <Column width="12%" demandPopin="true" minScreenWidth="Tablet" hAlign="Right">
                                    <Text text="Per Bike Value"/>
                                </Column>
                            </columns>

                            <items>
                                <ColumnListItem>
                                    <cells>
                                        <Text text="{modelCode}"/>
                                        <Text text="{modelDesc}"/>
                                        <Text text="{availableStock}" textAlign="Right"/>
                                        <Text text="{orderQty}" textAlign="Right"/>
                                        <Input 
                                            value="{allocationQty}"
                                            type="Number"
                                            liveChange="onAllocationChange"
                                            width="100%"
                                            textAlign="Right"/>
                                        <Text text="{perBikeValue}" textAlign="Right"/>
                                    </cells>
                                </ColumnListItem>
                            </items>

                        </Table>

                    </VBox>

                    <HBox class="sapUiSmallMarginTop" justifyContent="SpaceBetween">
                        <Button 
                            text="Previous" 
                            type="Default"
                            press="onModelPrevious"
                            width="120px"/>
                        <Button 
                            text="Save Allocation" 
                            type="Accept"
                            press="onSaveAllocation"
                            width="150px"/>
                    </HBox>

                </WizardStep>

            </Wizard>

        </content>

    </Page>
</mvc:View>