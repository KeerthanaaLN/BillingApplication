<mvc:View
    controllerName="billing.controller.billingHome"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
>
    <Page
        id="page"
        title="Billing Allocation"
    >
        <content>
            <Wizard
                id="BillingWizard"
                showNextButton="false"
            >
                <WizardStep
                    id="DealerStep"
                    title="Dealer Information"
                    validated="false"
                >
                    <VBox class="sapUiResponsiveMargin">
                        <HBox
                            class="sapUiSmallMargin"
                            alignItems="End"
                            justifyContent="SpaceBetween"
                        >
                            <VBox width="250px">
                                <Label
                                    text="Select Dealer ID :"
                                    class="sapUiSmallMarginBottom"
                                />
                                <Input
                                    id="dealerInput"
                                    width="100%"
                                    placeholder="Enter Dealer ID"
                                    showSuggestion="true"
                                    filterSuggests="false"
                                    startSuggestion="1"
                                    suggest="onDealerSuggest"
                                    suggestionItemSelected="onDealerSelect"
                                    liveChange="onDealerLiveChange"
                                    suggestionRows="{ path: '/Dealer',parameters: {$select: 'dealerID,dealerName'}}">
                                    <suggestionColumns>
                                        <Column width="250px">
                                            <Label text="Dealer ID" />
                                        </Column>
                                    </suggestionColumns>

                                    <suggestionRows>
                                        <ColumnListItem>
                                            <cells>
                                                <Text text="{dealerID} - {dealerName}" />
                                            </cells>
                                        </ColumnListItem>
                                    </suggestionRows>
                                </Input>
                            </VBox>

                            <VBox width="15%">
                                <Label
                                    text="Dealer Name :"
                                    class="sapUiSmallMarginBottom"
                                />
                                <Input
                                    value="{view>/dealerName}"
                                    editable="false"
                                />
                            </VBox>

                            <VBox width="15%">
                                <Label
                                    text="Fund Availability :"
                                    class="sapUiSmallMarginBottom"
                                />
                                <Input
                                    value="{view>/fundAvailability}"
                                    editable="false"
                                />
                            </VBox>

                            <VBox width="15%">
                                <Label
                                    text="Limit Available (in INF) :"
                                    class="sapUiSmallMarginBottom"
                                />
                                <Input
                                    value="{view>/limitAvailability}"
                                    editable="false"
                                />
                            </VBox>

                            <VBox width="15%">
                                <Label
                                    text="INF Other ( X ) Account"
                                    class="sapUiSmallMarginBottom"
                                />
                                <Input
                                    value="{view>/infOtherAmount}"
                                    editable="false"
                                />
                            </VBox>
                            <VBox class="sapUiSmallMarginTop">
                                 <Button
                                    text="Go"
                                    type="Emphasized"
                                    press="onDealerGo"
                                    enabled="{view>/dealerSelected}"
                                    width="150px"
                                />
                            </VBox>
                        </HBox>
                    </VBox>
                </WizardStep>

                <WizardStep
                    id="ModelStep"
                    title="Model Allocation Info"
                    validated="false"
                >
                    <VBox class="sapUiResponsiveMargin">

                        <HBox class="sapUiSmallMarginBottom" justifyContent="End">

                            <HBox class="sapUiTinyMarginStart">
                                <Text text="Total Stock : " />
                                <Text text="{view>/totalStock}" class="sapUiTinyMarginBegin sapUiSmallMarginEnd"/>
                            </HBox>

                            <HBox class="sapUiTinyMarginStart">
                                <Text text="Total Available : " />
                                <Text text="{view>/totalAvailable}" class="sapUiTinyMarginBegin sapUiSmallMarginEnd"/>
                            </HBox>

                            <HBox class="sapUiTinyMarginStart">
                                <Text text="Fund Required : " />
                                <Text text="{view>/totalFundRequired}" class="sapUiTinyMarginBegin sapUiSmallMarginEnd"/>
                            </HBox>

                            <HBox class="sapUiTinyMarginStart">
                                <Text text="Allocation Qty : " />
                                <Text text="{view>/totalAllocationQty}" class="sapUiTinyMarginBegin sapUiSmallMarginEnd"/>
                            </HBox>

                            <HBox class="sapUiTinyMarginStart">
                                <Text text="Total Value : " />
                                <Text text="{view>/totalOrderValue}" class="sapUiTinyMarginBegin"/>
                            </HBox>

                        </HBox>

                        <HBox justifyContent="SpaceBetween" class="sapUiSmallMarginBottom">

                            <Text
                                text="* Disclaimer: Please review all quantities carefully before saving."
                                class="sapUiSmallMarginTop disclaimerText"
                                wrapping="true"
                            />

                            <HBox>
                                <Button
                                    text="Calculate Allocation"
                                    type="Emphasized"
                                    press="onCalculateAllocation"
                                    class="sapUiTinyMarginEnd"
                                />
                                <Button
                                    text="Save Allocation"
                                    type="Accept"
                                    press="onSaveAllocation"
                                />
                            </HBox>

                        </HBox>



                        <Table
                            id="allocationTable"
                            items="{/Model}"
                            class="sapUiResponsiveMargin sapUiTinyMarginEnd" 
                            alternateRowColors="true"
                        >
                            <columns>
                                <Column
                                    width="12%"
                                    demandPopin="true"
                                    minScreenWidth="Tablet"
                                >
                                    <Text text="Model Code" />
                                </Column>
                                <Column
                                    width="32%"
                                    demandPopin="true"
                                    minScreenWidth="Tablet"
                                >
                                    <Text text="Model Description" />
                                </Column>
                                <Column
                                    width="10%"
                                    demandPopin="true"
                                    minScreenWidth="Tablet"
                                    hAlign="Right"
                                >
                                    <Text text="Depot Stock" />
                                </Column>
                                <Column
                                    width="10%"
                                    demandPopin="true"
                                    minScreenWidth="Tablet"
                                    hAlign="Right"
                                >
                                    <Text text="Allocated Qty" />
                                </Column>
                                <Column
                                    width="10%"
                                    demandPopin="true"
                                    minScreenWidth="Tablet"
                                    hAlign="Right"
                                >
                                    <Text text="Available Stock" />
                                </Column>
                                <Column
                                    width="12%"
                                    demandPopin="true"
                                    minScreenWidth="Tablet"
                                    hAlign="Right"
                                >
                                    <Text text="Fund Required" />
                                </Column>
                                <Column
                                    width="10%"
                                    demandPopin="true"
                                    minScreenWidth="Tablet"
                                    hAlign="Right"
                                >
                                    <Text text="Allocation Qty" />
                                </Column>
                                <Column
                                    width="12%"
                                    demandPopin="true"
                                    minScreenWidth="Tablet"
                                    hAlign="Right"
                                >
                                    <Text text="Per Bike Value" />
                                </Column>
                                <Column
                                    width="12%"
                                    demandPopin="true"
                                    minScreenWidth="Tablet"
                                    hAlign="Right"
                                >
                                    <Text text="Order Value" />
                                </Column>
                            </columns>

                            <items>
                                <ColumnListItem>
                                    <cells>
                                        <Text text="{modelCode}" />
                                        <Text text="{modelDesc}" />
                                        <Text
                                            text="{depotStock}"
                                            textAlign="Right"
                                        />
                                        <Text
                                            text="{allocatedQty}"
                                            textAlign="Right"
                                        />
                                        <Text
                                            text="{availableStock}"
                                            textAlign="Right"
                                        />
                                        <Text
                                            text="{fundRequired}"
                                            textAlign="Right"
                                        />
                                        <Input
                                            value="{allocationQty}"
                                            type="Number"
                                            liveChange="onAllocationChange"
                                            width="100%"
                                            textAlign="Right"
                                        />
                                        <Text
                                            text="{perBikeValue}"
                                            textAlign="Right"
                                        />
                                        <Text
                                            text="{orderValue}"
                                            textAlign="Right"
                                        />
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </VBox>

                    <HBox
                        class="sapUiSmallMarginTop"
                        justifyContent="SpaceBetween"
                    >
                        <Button
                            text="Previous"
                            type="Default"
                            press="onModelPrevious"
                            width="120px"
                        />
                    </HBox>
                </WizardStep>
            </Wizard>
        </content>
    </Page>
</mvc:View>
